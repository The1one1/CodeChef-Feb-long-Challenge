#include <bits/stdc++.h>
using namespace std;
string a1,a2,b1,b2,c1,c2;
int main() 
{
	int t,m1,m2,m3,n;
	cin>>t;
	while(t--)
	{
	int j=0;
	cin>>a1>>a2;
		if(a2[0]=='A')
		{
		    int h1=(a1[0]-'0')*10+(a1[1]-'0');
			if(h1==12)
			{
				m1=(a1[3]-'0')*10+(a1[4]-'0');	
			}
			else if(h1!=12)
			{
			    m1=(h1)*60+(a1[3]-'0')*10+(a1[4]-'0');
			}
		}
	     if(a2[0]=='P')
		{
		    int h1=(a1[0]-'0')*10+(a1[1]-'0');
			if(h1==12)
			{
				m1=12*60+(a1[3]-'0')*10+(a1[4]-'0');
			}
			else if(h1!=12)
			{
				m1=(12+h1)*60+(a1[3]-'0')*10+(a1[4]-'0');
			}
		}
		cin>>n;
		for(int i=0;i<n;i++)
		{
			cin>>b1>>b2>>c1>>c2;
			if(b2[0]=='A')
	     	{
		        int h1=(b1[0]-'0')*10+(b1[1]-'0');
			    if(h1==12)
			   {
			    	m2=(b1[3]-'0')*10+(b1[4]-'0');
		       }
			   else if(h1!=12)
			   {
			    	m2=(h1)*60+(b1[3]-'0')*10+(b1[4]-'0');
		     	}
			if(c2[0]=='A')
			{
				int h1=(c1[0]-'0')*10+(c1[1]-'0');
			    if(h1==12)
			    {
				    m3=(c1[3]-'0')*10+(c1[4]-'0');
			    }
			    else
			    {
				    m3=(h1)*60+(c1[3]-'0')*10+(c1[4]-'0');
			    }
			}
		    else if(c2[0]=='P')
			{
			    int h1=(c1[0]-'0')*10+(c1[1]-'0');
			    if(h1==12)
			    {
			     	m3=12*60+(c1[3]-'0')*10+(c1[4]-'0');
			    }
			    else
			    {
				    m3=(12+h1)*60+(c1[3]-'0')*10+(c1[4]-'0');
			    }
			}	
		    }
	    else if(b2[0]=='P')
		    {
		        int h1=(b1[0]-'0')*10+(b1[1]-'0');
			    if(h1==12)
			    {
				   m2=12*60+(b1[3]-'0')*10+(b1[4]-'0');
			    }
			    else
		    	{
			    	m2=(12+h1)*60+(b1[3]-'0')*10+(b1[4]-'0');
		    	}
			    if(c2[0]=='P')
		    	{
			       int h1=(c1[0]-'0')*10+(c1[1]-'0');
			        if(h1==12)
			       {
			          m3=12*60+(c1[3]-'0')*10+(c1[4]-'0');
			       }
			       else
			       {
				    m3=(12+h1)*60+(c1[3]-'0')*10+(c1[4]-'0');
			       }
			   }
	    	}
				if((m1>=m2)&&(m1<=m3))
				   cout<<1;
				else
				   cout<<0;
		}
		cout<<endl;
	}
	return 0;
}
	


